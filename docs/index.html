<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>TMMLU+ Leaderboard</title>

<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<!-- Plotly -->
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

<style>
body { padding: 40px; background: #f8f9fa; }
.card { border-radius: 12px; margin-bottom: 12px; }
.card-header { background: #0d6efd; color: white; cursor: pointer; }
.card-header:hover { background: #0b5ed7; }
</style>
</head>
<body>

<h2 class="text-center mb-4">ðŸ“Š TMMLU+ Leaderboard</h2>

<!-- Table -->
<div id="table"></div>

<hr>

<!-- Radar Discipline Card -->
<div class="card">
  <div class="card-header" data-bs-toggle="collapse" data-bs-target="#discRadar">
    ðŸ§­ TMMLU+ Discipline Comparison (Radar)
  </div>
  <div class="collapse show" id="discRadar">
    <div class="card-body">
      <div id="radar-discipline"></div>
    </div>
  </div>
</div>

<!-- Radar Category Card -->
<div class="card">
  <div class="card-header" data-bs-toggle="collapse" data-bs-target="#catRadar">
    ðŸ§­ TMMLU+ Category Comparison (Radar)
  </div>
  <div class="collapse show" id="catRadar">
    <div class="card-body">
      <div id="radar-category"></div>
    </div>
  </div>
</div>

<!-- Bar Category Card -->
<div class="card">
  <div class="card-header" data-bs-toggle="collapse" data-bs-target="#barCat">
    ðŸ“Š TMMLU+ Category Comparison (Bar)
  </div>
  <div class="collapse show" id="barCat">
    <div class="card-body">
      <div id="bar-category"></div>
    </div>
  </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
fetch("./leaderboard.json").then(r => r.json()).then(data => {

  // ===== Table =====
  const table = document.getElementById("table");
  let html = `<table class="table table-striped table-bordered">
  <thead class="table-dark">
  <tr><th>Rank</th><th>Model</th><th>Overall</th><th>TMMLU+</th></tr>
  </thead><tbody>`;

  data.leaderboard.forEach((m, i) => {
    html += `<tr><td>${i+1}</td><td>${m.model}</td>
             <td>${m.overall}</td><td>${m.tmmlu_overall}</td></tr>`;
  });
  html += "</tbody></table>";
  table.innerHTML = html;

  // ===== Charts =====
  const discTraces = [];
  const catTraces = [];
  const barTraces = [];

  data.leaderboard.forEach(m => {
    const d = data.details[m.model];

    // Radar - Discipline
    discTraces.push({
      type: "scatterpolar",
      r: Object.values(d.tmmlu_disciplines),
      theta: Object.keys(d.tmmlu_disciplines),
      fill: "toself",
      name: m.model
    });

    // Radar - Category
    catTraces.push({
      type: "scatterpolar",
      r: Object.values(d.tmmlu_categories),
      theta: Object.keys(d.tmmlu_categories),
      fill: "toself",
      name: m.model
    });

    // Bar chart
    barTraces.push({
      type: "bar",
      x: Object.keys(d.tmmlu_categories),
      y: Object.values(d.tmmlu_categories),
      name: m.model
    });
  });

  // Plot Radar Discipline
  Plotly.newPlot("radar-discipline", discTraces, {
    polar: {
      radialaxis: { range: [0, 1] },
      angularaxis: { tickfont: { size: 12 } }
    },
    legend: { orientation: "h" },
    margin: { t: 50, b: 50, l: 50, r: 50 },
    width: 600,
    height: 500
  });

  // Plot Radar Category
  Plotly.newPlot("radar-category", catTraces, {
    polar: {
      radialaxis: { range: [0, 1] },
      angularaxis: { tickfont: { size: 12 } }
    },
    legend: { orientation: "h" },
    margin: { t: 50, b: 50, l: 50, r: 50 },
    width: 600,
    height: 500
  });

  // Plot Bar Category
  Plotly.newPlot("bar-category", barTraces, {
    barmode: "group",
    yaxis: { range: [0, 1] },
    width: 800,
    height: 400
  });

});
</script>

</body>
</html>
