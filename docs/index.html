<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>TMMLU+ Leaderboard</title>

<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<!-- Plotly -->
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

<style>
body { padding: 40px; background: #f8f9fa; }
.card { border-radius: 12px; margin-bottom: 12px; }
.card-header { background: #0d6efd; color: white; cursor: pointer; }
.card-header:hover { background: #0b5ed7; }
</style>
</head>
<body>

<h2 class="text-center mb-4">ðŸ“Š TMMLU+ Leaderboard</h2>

<!-- Table -->
<div id="table"></div>

<hr>

<!-- Radar Discipline Card -->
<div class="card">
  <div class="card-header" data-bs-toggle="collapse" data-bs-target="#discRadar">
    ðŸ§­ TMMLU+ Discipline Comparison (Radar)
  </div>
  <div class="collapse show" id="discRadar">
    <div class="card-body">
      <div id="radar-discipline"></div>
    </div>
  </div>
</div>

<!-- Radar Category Card -->
<div class="card">
  <div class="card-header" data-bs-toggle="collapse" data-bs-target="#catRadar">
    ðŸ§­ TMMLU+ Category Comparison (Radar)
  </div>
  <div class="collapse show" id="catRadar">
    <div class="card-body">
      <div id="radar-category"></div>
    </div>
  </div>
</div>

<!-- Bar Category Card -->
<div class="card">
  <div class="card-header" data-bs-toggle="collapse" data-bs-target="#barCat">
    ðŸ“Š TMMLU+ Category Comparison (Bar)
  </div>
  <div class="collapse show" id="barCat">
    <div class="card-body">
      <div id="bar-category"></div>
    </div>
  </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
// ===== Embed leaderboard.json directly =====
const data = {
  "leaderboard": [
    {
      "model": "FoxBrain_v1.2_70B_0630",
      "overall": 0.2985,
      "tmmlu_overall": 0.5001
    },
    {
      "model": "gpt-oss-20b",
      "overall": 0.1545,
      "tmmlu_overall": 0.5982
    }
  ],
  "details": {
    "FoxBrain_v1.2_70B_0630": {
      "tmmlu_disciplines": { "Science": 0.5, "Business": 0.5, "Health & Medicine": 0.5, "Tech & Engineering": 0.58 },
      "tmmlu_categories": { "Chemistry": 0.5, "Physics": 0.48, "Biology": 0.52, "Engineering": 0.55 },
      "general": { "AIEC": 0.4552, "TW-RAG": 0.3, "drcd": 0.584, "penguin_table": 0.75 }
    },
    "gpt-oss-20b": {
      "tmmlu_disciplines": { "Science": 0.65, "Business": 0.55, "Health & Medicine": 0.61, "Tech & Engineering": 0.61 },
      "tmmlu_categories": { "Chemistry": 0.65, "Physics": 0.63, "Biology": 0.66, "Engineering": 0.61 },
      "general": { "AIEC": 0.0, "TW-RAG": 0.3, "drcd": 0.0386, "penguin_table": 0.7431 }
    }
  }
};

// ===== Table =====
const table = document.getElementById("table");
let html = `<table class="table table-striped table-bordered">
<thead class="table-dark">
<tr><th>Rank</th><th>Model</th><th>Overall</th><th>TMMLU+</th></tr>
</thead><tbody>`;

data.leaderboard.forEach((m, i) => {
  html += `<tr><td>${i+1}</td><td>${m.model}</td>
           <td>${m.overall}</td><td>${m.tmmlu_overall}</td></tr>`;
});
html += "</tbody></table>";
table.innerHTML = html;

// ===== Colors for consistency =====
const colors = ["#1f77b4", "#ff7f0e", "#2ca02c", "#d62728"];

// ===== Charts =====
const discTraces = [];
const catTraces = [];
const barTraces = [];

data.leaderboard.forEach((m, i) => {
  const d = data.details[m.model];
  const color = colors[i % colors.length];

  // Radar - Discipline
  discTraces.push({
    type: "scatterpolar",
    r: Object.values(d.tmmlu_disciplines),
    theta: Object.keys(d.tmmlu_disciplines),
    fill: "toself",
    name: m.model,
    marker: { color: color }
  });

  // Radar - Category
  catTraces.push({
    type: "scatterpolar",
    r: Object.values(d.tmmlu_categories),
    theta: Object.keys(d.tmmlu_categories),
    fill: "toself",
    name: m.model,
    marker: { color: color }
  });

  // Bar chart
  barTraces.push({
    type: "bar",
    x: Object.keys(d.tmmlu_categories),
    y: Object.values(d.tmmlu_categories),
    name: m.model,
    marker: { color: color }
  });
});

// Plot Radar Discipline
Plotly.newPlot("radar-discipline", discTraces, {
  polar: { radialaxis: { range: [0,1] }, angularaxis: { tickfont: { size:12 } } },
  legend: { orientation: "h" },
  margin: { t:50,b:50,l:50,r:50 },
  width: 600,
  height: 500
});

// Plot Radar Category
Plotly.newPlot("radar-category", catTraces, {
  polar: { radialaxis: { range: [0,1] }, angularaxis: { tickfont: { size:12 } } },
  legend: { orientation: "h" },
  margin: { t:50,b:50,l:50,r:50 },
  width: 600,
  height: 500
});

// Plot Bar Category
Plotly.newPlot("bar-category", barTraces, {
  barmode: "group",
  yaxis: { range: [0,1] },
  width: 800,
  height: 400
});
</script>

</body>
</html>
